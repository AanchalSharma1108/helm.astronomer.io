{{ define "helm_globals" -}}
{{ print "{" -}}
{{ printf "\"baseDomain\":\"%v\"," .Values.global.baseDomain -}}
{{ printf "\"registryAuthSecret\":\"%v\"," .Values.global.registryAuthSecret -}}
{{ printf "\"nginxAuthSecret\":\"%v\"," .Values.global.nginxAuthSecret -}}
{{ printf "\"acme\":%v," (print .Values.global.acme | toString) -}}
{{ printf "\"rbacEnabled\":%v," (print .Values.global.rbacEnabled | toString) -}}
{{ printf "\"tlsSecret\":\"%v\"" (print .Values.global.tlsSecret | toString | replace "<nil>" "") -}}
{{ print "}" -}}
{{- end }}

{{- define "houston_jwt_passphrase" }}
  {{- randAlphaNum 32 | b64enc }}
{{- end }}

{{ define "commander_image" -}}
{{ .Values.images.commander }}:{{ or .Values.global.imageTag .Values.imageTag }}
{{- end }}

{{ define "houston_image" -}}
{{ .Values.images.houston }}:{{ or .Values.global.imageTag .Values.imageTag }}
{{- end }}

{{ define "registry_image" -}}
{{ .Values.images.registry }}:{{ or .Values.global.imageTag .Values.imageTag }}
{{- end }}
